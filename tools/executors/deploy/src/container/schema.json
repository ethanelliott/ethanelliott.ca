{
  "$schema": "https://json-schema.org/schema",
  "type": "object",
  "title": "Container Deploy Executor",
  "description": "Builds a Docker image, pushes it, and updates the Helm values.yaml with the new tag",
  "properties": {
    "image": {
      "type": "string",
      "description": "Full Docker image name (e.g. ethanelliottio/camera)"
    },
    "dockerfile": {
      "type": "string",
      "description": "Path to the Dockerfile relative to workspace root"
    },
    "context": {
      "type": "string",
      "description": "Docker build context directory (default: workspace root)",
      "default": "."
    },
    "tag": {
      "type": "string",
      "description": "Image tag to apply (e.g. sha-abc1234, latest)",
      "default": "latest"
    },
    "deployment": {
      "type": "string",
      "description": "Deployment directory name under deployments/ to update (e.g. camera, landing-page)"
    },
    "pushImage": {
      "type": "boolean",
      "description": "Whether to push the image after building",
      "default": true
    },
    "updateDeployment": {
      "type": "boolean",
      "description": "Whether to update the deployment values.yaml with the new tag",
      "default": true
    }
  },
  "required": [
    "image",
    "dockerfile"
  ]
}
