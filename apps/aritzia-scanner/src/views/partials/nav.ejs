<nav class="nav">
  <div class="nav-links">
    <a href="/">Newest</a>
    <a href="/products">All Products</a>
    <a href="/sale" class="nav-sale-link">Sale</a>
    <a href="/categories">Categories</a>
    <a href="/restocks">Restocks</a>
    <a href="/colors">Colors</a>
    <a href="/stores">Stores</a>
    <a href="/discontinued">Discontinued</a>
    <a href="/favorites" class="nav-fav-link"
      >&#x2665; Favorites <span id="fav-count" class="fav-badge"></span
    ></a>
    <span class="nav-divider">|</span>
    <a href="/ai/search" class="nav-ai-link">ğŸ¤– AI Search</a>
    <a href="/ai/style" class="nav-ai-link">ğŸ‘— Style Advisor</a>
    <a href="/ai/deals" class="nav-ai-link">ğŸ’° Deals Report</a>
  </div>
  <% if (typeof stats !== 'undefined' && stats) { %>
  <div class="nav-stats">
    <span class="nav-stat"><%= stats.productCount %> products</span>
    <span class="nav-stat"><%= stats.variantCount %> variants</span>
    <span class="nav-stat">Scanned <%= stats.lastScanFormatted %></span>
  </div>
  <% } %>
</nav>
<button
  class="theme-toggle"
  onclick="toggleTheme()"
  title="Toggle dark/light mode"
  id="theme-toggle"
>
  ğŸŒ™
</button>
<script>
  (function () {
    const saved = localStorage.getItem('theme');
    if (saved === 'light') {
      document.documentElement.style.colorScheme = 'light';
      document.getElementById('theme-toggle').textContent = 'â˜€ï¸';
    } else if (saved === 'dark') {
      document.documentElement.style.colorScheme = 'dark';
      document.getElementById('theme-toggle').textContent = 'ğŸŒ™';
    }
  })();
  function toggleTheme() {
    const html = document.documentElement;
    const current =
      html.style.colorScheme ||
      (window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light');
    const next = current === 'dark' ? 'light' : 'dark';
    html.style.colorScheme = next;
    localStorage.setItem('theme', next);
    document.getElementById('theme-toggle').textContent =
      next === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
  }
</script>
